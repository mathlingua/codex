(this["webpackJsonpmathlingua-client"]=this["webpackJsonpmathlingua-client"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(28),c=n.n(i),s=(n(66),n(12)),o=n(14),u=n(31),l=n(30),d=n(39),h=n.n(d),p=n(5),f=n(55),m=n.n(f),b=n(2),j=n.n(b),v=n(4),O=n(40),x=n(38),g=(n(81),n(7)),y=n(20),w=n.n(y),_=function e(t){Object(s.a)(this,e),this.isWord=void 0,this.children=void 0,this.isWord=t,this.children=new Map},k=function(){function e(){Object(s.a)(this,e),this.root=new _(!1)}return Object(o.a)(e,[{key:"add",value:function(e){this.addToTrie(this.root,e.toLowerCase(),0)}},{key:"getSuffixes",value:function(e){return this.searchTrie(this.root,e.toLowerCase())}},{key:"addToTrie",value:function(e,t,n){if(!(n>=t.length)){var a=t[n];e.children.has(a)||e.children.set(a,{isWord:n===t.length-1,children:new Map});var r=e.children.get(a);n===t.length-1&&(r.isWord=!0),this.addToTrie(r,t,n+1)}}},{key:"searchTrie",value:function(e,t){var n=this.findTrieLeaf(e,t,0);if(!n)return[];var a=new Set;return this.getWordsUnder("","",n,a),Array.from(a)}},{key:"findTrieLeaf",value:function(e,t,n){if(n>=t.length)return e;var a=t[n];return e.children.has(a)?this.findTrieLeaf(e.children.get(a),t,n+1):null}},{key:"getWordsUnder",value:function(e,t,n,a){if(n){e+=t,n.isWord&&a.add(e);var r,i=Object(g.a)(n.children.keys());try{for(i.s();!(r=i.n()).done;){var c=r.value;this.getWordsUnder(e,c,n.children.get(c),a)}}catch(s){i.e(s)}finally{i.f()}e=e.substring(0,e.length-1)}}}]),e}(),C=function(){function e(t){Object(s.a)(this,e),this.searchIndex=new Map;var n,a=Object(g.a)(t.collectionResult.fileResults);try{for(a.s();!(n=a.n()).done;){var r,i=n.value,c=Object(g.a)(i.entities);try{for(c.s();!(r=c.n()).done;){var o,u=r.value,l=Object(g.a)(u.words);try{for(l.s();!(o=l.n()).done;){var d,h=o.value.toLowerCase(),p=null!==(d=this.searchIndex.get(h))&&void 0!==d?d:new Set;p.add(i.relativePath),this.searchIndex.set(h,p)}}catch(f){l.e(f)}finally{l.f()}}}catch(f){c.e(f)}finally{c.f()}}}catch(f){a.e(f)}finally{a.f()}}return Object(o.a)(e,[{key:"search",value:function(e){var t,n=e.split(" ").map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length>0}));if(0===n.length)return[];var a=null!==(t=this.searchIndex.get(n[0]))&&void 0!==t?t:new Set;if(0===a.size)return[];for(var r=1;r<n.length;r++){var i;a=P(a,null!==(i=this.searchIndex.get(n[r]))&&void 0!==i?i:new Set)}return Array.from(a)}}]),e}();function P(e,t){if(t.size>e.size)return P(t,e);for(var n=new Set,a=0,r=Array.from(e.values());a<r.length;a++){var i=r[a];t.has(i)&&n.add(i)}return n}var N=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"getAllPaths",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/allPaths");case 2:return t=e.sent,e.abrupt("return",t.data.paths);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getHomeHtml",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/home");case 2:return t=e.sent,e.abrupt("return",t.data.homeHtml);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getFileResult",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/fileResult",{params:{path:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/search",{params:{query:t}});case 2:return n=e.sent,e.abrupt("return",n.data.paths);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAutocompleteSuffixes",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/completeWord",{params:{word:t}});case 2:return n=e.sent,e.abrupt("return",n.data.suffixes);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntityWithSignature",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/withSignature",{params:{signature:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=function(){function e(t){Object(s.a)(this,e),this.searchClient=void 0,this.autoCompleteClient=void 0,this.allPaths=void 0,this.signatureToEntity=void 0,this.homeHtml=void 0,this.pathToFileResult=void 0,this.searchClient=new C(t),this.autoCompleteClient=new k;var n,a=Object(g.a)(t.collectionResult.fileResults);try{for(a.s();!(n=a.n()).done;){var r,i=n.value,c=Object(g.a)(i.entities);try{for(c.s();!(r=c.n()).done;){var o,u=r.value,l=Object(g.a)(u.words);try{for(l.s();!(o=l.n()).done;){var d=o.value;this.autoCompleteClient.add(d)}}catch(y){l.e(y)}finally{l.f()}}}catch(y){c.e(y)}finally{c.f()}}}catch(y){a.e(y)}finally{a.f()}this.allPaths=t.collectionResult.fileResults.map((function(e){return e.relativePath})),this.signatureToEntity=new Map;var h,p=Object(g.a)(t.collectionResult.fileResults);try{for(p.s();!(h=p.n()).done;){var f,m=h.value,b=Object(g.a)(m.entities);try{for(b.s();!(f=b.n()).done;){var j=f.value;this.signatureToEntity.set(j.signature,j)}}catch(y){b.e(y)}finally{b.f()}}}catch(y){p.e(y)}finally{p.f()}this.homeHtml=t.homeHtml,this.pathToFileResult=new Map;var v,O=Object(g.a)(t.collectionResult.fileResults);try{for(O.s();!(v=O.n()).done;){var x=v.value;this.pathToFileResult.set(x.relativePath,x)}}catch(y){O.e(y)}finally{O.f()}}return Object(o.a)(e,[{key:"getAllPaths",value:function(){var e=Object(v.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.allPaths);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHomeHtml",value:function(){var e=Object(v.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.homeHtml);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFileResult",value:function(){var e=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.pathToFileResult.get(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.searchClient.search(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAutocompleteSuffixes",value:function(){var e=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.autoCompleteClient.getSuffixes(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntityWithSignature",value:function(){var e=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signatureToEntity.get(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=null;function T(){if(!S){var e=window.MATHLINGUA_DATA;S=e?new E(e):new N}return S}function I(){return(I=Object(v.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T().getAllPaths());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(v.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T().getHomeHtml());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T().getFileResult(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return D.apply(this,arguments)}function D(){return(D=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T().search(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return R.apply(this,arguments)}function R(){return(R=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T().getAutocompleteSuffixes(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return M.apply(this,arguments)}function M(){return(M=Object(v.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T().getEntityWithSignature(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(18),V=n(1);function W(e){var t=document.getElementById(e);t&&("mathlingua-dropdown-menu-hidden"===t.className?t.className="mathlingua-dropdown-menu-shown":t.className="mathlingua-dropdown-menu-hidden")}var U=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).ref=void 0,a.ref=r.a.createRef(),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){z(this.ref.current)}},{key:"componentDidUpdate",value:function(){z(this.ref.current)}},{key:"render",value:function(){var e=this;function t(e,t){return n.apply(this,arguments)}function n(){return(n=Object(v.a)(j.a.mark((function t(n,a){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return W(a),t.next=3,$(n);case 3:(r=t.sent)&&e.props.onViewEntity&&e.props.onViewEntity(r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(v.a)(j.a.mark((function e(n,a){var r,i,c,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mathlinguaToggleDropdown"!==n){e.next=8;break}if(r=a[0]){e.next=4;break}return e.abrupt("return");case 4:W(r.substring(1,r.length-1)),e.next=16;break;case 8:if("mathlinguaViewSignature"!==n){e.next=16;break}if(i=a[0],c=a[1],i&&c){e.next=13;break}return e.abrupt("return");case 13:s=i.substring(1,i.length-1).replace(/\\\\/,"\\"),o=c.substring(1,c.length-1),t(s,o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var r={replace:function(e){if(e instanceof x.Element&&e.attribs&&e.attribs.onclick){var t=e.attribs.onclick;delete e.attribs.onclick;var n=e.attribs.class;delete e.attribs.class;var i=/([a-zA-Z0-9]+)\((.*?)\)/.exec(t.trim());if(i&&3===i.length){var c=i[1],s=i[2].split(",").map((function(e){return e.trim()}));return Object(V.jsx)("span",{className:n,onClick:function(){return function(e,t){return a.apply(this,arguments)}(c,s)},children:Object(O.b)(e.children,r)})}}}};return Object(V.jsx)("div",{ref:this.ref,children:Object(O.a)(this.props.html,r)})}}]),n}(r.a.Component),G=Object(F.b)()(U);function q(e){var t=e;'"'===t[0]&&(t=t.substring(1)),'"'===t[t.length-1]&&(t=t.substring(0,t.length-1)),t=t.replace(/([a-zA-Z0-9])\?\??/g,"$1");for(var n=document.createDocumentFragment(),a="",r=0;r<t.length;)if("$"===t[r]&&"$"===t[r+1]&&"$"===t[r+2]){r+=3,n.appendChild(document.createTextNode(a)),a="";for(var i=document.createElement("span"),c="";r<t.length&&("$"!==t[r]||"$"!==t[r+1]||"$"!==t[r+2]);)c+=t[r++];"$"===t[r]&&r++,"$"===t[r]&&r++,"$"===t[r]&&r++;try{katex.render(c,i,{throwOnError:!0,displayMode:!1})}catch(m){i.appendChild(document.createTextNode(c))}n.appendChild(i)}else if("\\"===t[r]&&"["===t[r+1]){r+=2,n.appendChild(document.createTextNode(a)),a="";var s=document.createElement("span");s.className="display-mode";for(var o="";r<t.length&&("\\"!==t[r]||"]"!==t[r+1]);)o+=t[r++];"\\"===t[r]&&r++,"]"===t[r]&&r++;try{katex.render(o,s,{throwOnError:!0,displayMode:!0})}catch(b){s.appendChild(document.createTextNode(o))}n.appendChild(s)}else if("\\"===t[r]&&"("===t[r+1]){r+=2,n.appendChild(document.createTextNode(a)),a="";for(var u=document.createElement("span"),l="";r<t.length&&("\\"!==t[r]||")"!==t[r+1]);)l+=t[r++];"\\"===t[r]&&r++,")"===t[r]&&r++;try{katex.render(l,u,{throwOnError:!0,displayMode:!1})}catch(j){u.appendChild(document.createTextNode(l))}n.appendChild(u)}else if("$"===t[r]&&"$"===t[r+1]){r+=2,n.appendChild(document.createTextNode(a)),a="";var d=document.createElement("span");d.className="display-mode";for(var h="";r<t.length&&("$"!==t[r]||"$"!==t[r+1]);)h+=t[r++];"$"===t[r]&&r++,"$"===t[r]&&r++;try{katex.render(h,d,{throwOnError:!0,displayMode:!0})}catch(v){d.appendChild(document.createTextNode(h))}n.appendChild(d)}else if("$"===t[r]){r++,n.appendChild(document.createTextNode(a)),a="";for(var p=document.createElement("span"),f="";r<t.length&&"$"!==t[r];)f+=t[r++];"$"===t[r]&&r++;try{katex.render(f,p,{throwOnError:!0,displayMode:!1})}catch(O){p.appendChild(document.createTextNode(f))}n.appendChild(p)}else a+=t[r++];return a.length>0&&n.appendChild(document.createTextNode(a)),n}function z(e){if(!(e.className&&e.className.indexOf&&e.className.indexOf("no-render")>=0)){var t=!1;if("mathlingua"===e.className)for(var n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(a&&"mathlingua-header"===a.className&&"written:"===a.textContent){t=!0;break}}for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(3===i.nodeType){var c=i.textContent;if(c.trim()){t&&('"'===c[0]&&(c=c.substring(1)),'"'===c[c.length-1]&&(c=c.substring(0,c.length-1)),c="$$$"+c+"$$$");var s=q(c);r+=s.childNodes.length-1,e.replaceChild(s,i)}}else 1===i.nodeType&&z(i)}}}var J=n(56),Z=n.n(J),Q=function(e){return Object(V.jsx)("div",{className:Z.a.mathlinguaBlockCommentTopLevel,children:Object(V.jsx)(G,{html:e.renderedHtml})})},X=n(32),K=n.n(X),Y=n(41),ee=n.n(Y);function te(e){return Object(V.jsxs)("div",{className:ee.a.errorMessage,children:[Object(V.jsx)("span",{className:ee.a.errorLabel,children:"ERROR:"})," ",e.message]})}var ne=n(33),ae=n.n(ne),re=function(e){var t=Object(a.useState)(!0),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(V.jsxs)("div",{className:ae.a.mathlinguaTopLevel,children:[e.showCloseButton?Object(V.jsx)("button",{className:ae.a.mathlinguaCloseButton,onClick:function(){e.onEntityClosed&&e.onEntityClosed(e.id)},children:"\u2715"}):null,Object(V.jsx)("button",{className:ae.a.mathlinguaFlipIcon,onClick:function(){i(!r)},children:"\u2022"}),r?Object(V.jsx)(G,{onViewEntity:e.onViewEntity,html:e.renderedHtml}):Object(V.jsx)(G,{onViewEntity:e.onViewEntity,html:e.rawHtml})]})},ie=n(34),ce=n.n(ie),se=function(e){return Object(V.jsx)("div",{className:ce.a.entitiesPanel,style:e.entities.length>0?{display:"block"}:{display:"none"},children:Object(V.jsxs)("div",{children:[Object(V.jsx)("button",{className:ce.a.closeAllButton,onClick:function(){e.onCloseAll&&e.onCloseAll()},children:"\u2715"}),e.entities.map((function(t){return Object(V.jsx)("span",{className:ce.a.entitiesPanelItem,children:Object(V.jsx)(re,{id:t.id,showCloseButton:!0,rawHtml:t.rawHtml,renderedHtml:t.renderedHtml,onViewEntity:e.onViewEntity,onEntityClosed:e.onEntityClosed})},t.id)}))]})})},oe=n(35),ue=n.n(oe),le=function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),r=n[0],i=n[1],c=function(e){i(r.concat(e))},s=function(e){i(r.filter((function(t){return t.id!==e})))};return Object(V.jsxs)("div",{className:ue.a.topLevelEntityGroup,children:[Object(V.jsx)(re,{id:e.entity.id,rawHtml:e.entity.rawHtml,renderedHtml:e.entity.renderedHtml,showCloseButton:!1,onViewEntity:c,onEntityClosed:s}),r.length>0?Object(V.jsx)("div",{className:ue.a.triangleBorder,children:Object(V.jsx)("div",{className:ue.a.triangle})}):null,Object(V.jsx)(se,{onViewEntity:c,onEntityClosed:s,entities:r,onCloseAll:function(){return i([])}})]})},de=function(){return Object(F.c)()},he=F.d,pe=n(16),fe=Object(pe.b)({name:"query",initialState:{query:""},reducers:{queryUpdated:function(e,t){e.query=t.payload}}}),me=function(e){return e.query.query},be=fe.actions.queryUpdated,je=fe.reducer,ve={path:void 0},Oe=Object(pe.b)({name:"viewedFile",initialState:ve,reducers:{viewedPathUpdated:function(e,t){e.path=t.payload}}}),xe=function(e){return e.viewedPath.path},ge=Oe.actions.viewedPathUpdated,ye=Oe.reducer,we=n(57),_e=n.n(we),ke=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),c=Object(p.a)(i,2),s=c[0],o=c[1];return Object(a.useEffect)((function(){(function(){return L.apply(this,arguments)})().then((function(e){o(e)})).catch((function(e){return r(e.message)}))}),[]),s?Object(V.jsx)("div",{className:_e.a.mathlinguaHome,"data-testid":"home",children:n?Object(V.jsx)(te,{message:n}):Object(V.jsx)(G,{html:s})}):null},Ce=function(){var e=he(xe)||"",t=Object(a.useState)(void 0),n=Object(p.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(""),s=Object(p.a)(c,2),o=s[0],u=s[1],l=he(me),d=Object(a.useState)(!0),h=Object(p.a)(d,2),f=h[0],b=h[1],j=Object(a.useRef)(null);if(Object(a.useEffect)((function(){""!==e&&function(e){return H.apply(this,arguments)}(e).then((function(e){return i(e)})).catch((function(e){return u(e.message)})).finally((function(){return b(!1)}))}),[e]),Object(a.useEffect)((function(){if(j.current){var e=new m.a(j.current);e.unmark({done:function(){l.length>0&&e.mark(l,{caseSensitive:!1,separateWordSearch:!0})}})}}),[e,r,l]),""===e)return Object(V.jsx)(ke,{});var v=Object(V.jsx)("div",{className:K.a.mathlinguaPage,children:Object(V.jsx)(te,{message:o})});if(!r&&!f)return Object(V.jsx)("div",{className:K.a.mathlinguaPage,children:Object(V.jsx)(te,{message:"Page Not Found"})});if(!r||0===r.entities.length)return null;var O=Object(V.jsx)("div",{className:K.a.mathlinguaPage,children:null===r||void 0===r?void 0:r.entities.map((function(e){return Object(V.jsx)("span",{children:"TopLevelBlockComment"===e.type?Object(V.jsx)(Q,{renderedHtml:e.renderedHtml,rawHtml:e.rawHtml}):Object(V.jsx)(le,{entity:e})},e.id)}))});return Object(V.jsx)("div",{ref:j,children:o?v:O})},Pe=n(15),Ne=n.n(Pe),Ee=n(61),Se=Object(pe.b)({name:"paths",initialState:{paths:[]},reducers:{pathsUpdated:function(e,t){t.payload?e.paths=Object(Ee.a)(t.payload):e.paths=t.payload}}}),Te=function(e){return e.paths.paths},Ie=Se.actions.pathsUpdated,Le=function(e){return function(){var t=Object(v.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e);case 2:a=t.sent,n(Ie(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},He=Se.reducer;function Ae(){return window.screen.width<=500}var De={sidePanelVisible:!Ae()},Be=Object(pe.b)({name:"sidePanelVisible",initialState:De,reducers:{sidePanelVisibilityChanged:function(e,t){e.sidePanelVisible=t.payload}}}),Re=function(e){return e.sidePanelVisible.sidePanelVisible},$e=Be.actions.sidePanelVisibilityChanged,Me=Be.reducer,Fe=n(23),Ve=n(17),We=n.n(Ve),Ue=function e(t){var n=de(),r=Object(a.useState)(!1),i=Object(p.a)(r,2),c=i[0],s=i[1],o=he(xe)||"";return t.node.isDir?Object(V.jsxs)("span",{children:[Object(V.jsxs)("li",{className:We.a.mathlinguaListDirItem+" "+We.a.sidePanelItem,onClick:function(){return s(!c)},children:[c?Object(V.jsx)("button",{className:We.a.triangle,children:"\u25be"}):Object(V.jsx)("button",{className:We.a.triangle,children:"\u25b8"}),t.node.name.replace("_"," ")]}),c?Object(V.jsx)("ul",{children:t.node.children.map((function(t){return Object(V.jsx)(e,{node:t},t.name)}))}):null]}):Object(V.jsx)("li",{className:We.a.mathlinguaListFileItem+" "+We.a.sidePanelItem,children:Object(V.jsx)(Fe.b,{to:"/".concat(t.node.path),className:o===t.node.path?"".concat(We.a.link," ").concat(We.a.selected):We.a.link,onClick:function(){Ae()&&n($e(!1)),n(ge(t.node.path))},children:t.node.name.replace(".math","").replace("_"," ")},t.node.name)})},Ge=function(){var e,t,n=de(),r=he(Re),i=he(Te),c=he(xe)||"",s=Object(a.useState)([]),o=Object(p.a)(s,2),u=o[0],l=o[1],d=Object(a.useState)(""),h=Object(p.a)(d,2),f=h[0],m=h[1],b=Object(a.useState)({name:"",isDir:!0,path:void 0,children:[]}),j=Object(p.a)(b,2),v=j[0],O=j[1];Object(a.useEffect)((function(){(function(){return I.apply(this,arguments)})().then((function(e){l(e),n(Ie(e))})).catch((function(e){return m(e.message)}))}),[n]),Object(a.useEffect)((function(){O(function(e){var t,n={name:"",isDir:!0,path:void 0,children:[]},a=Object(g.a)(e);try{for(a.s();!(t=a.n()).done;){qe(n,t.value)}}catch(r){a.e(r)}finally{a.f()}return n}(null!==i&&void 0!==i?i:u))}),[u,i]);var x=Object(V.jsx)("div",{className:Ne.a.sidePanel,children:Object(V.jsx)(te,{message:f})}),y=r?Ae()?{width:"100%"}:{minWidth:"15em"}:{width:"0"},w=Object(V.jsx)("div",{style:y,className:Ne.a.sidePanel,children:Object(V.jsxs)("div",{className:Ne.a.sidePanelContent,children:[Object(V.jsx)(Fe.b,{to:"/",className:c?"".concat(Ne.a.sidePanelItem," ").concat(Ne.a.mathlinguaHomeItem," ").concat(Ne.a.mathlinguaListFileItem):"".concat(Ne.a.sidePanelItem," ").concat(Ne.a.mathlinguaHomeItem," ").concat(Ne.a.mathlinguaListFileItem," ").concat(Ne.a.selected),onClick:function(){Ae()&&n($e(!1)),n(ge(""))},children:Object(V.jsx)("div",{children:"Home"})},"home"),Object(V.jsx)("hr",{}),null===(e=v.children[0])||void 0===e||null===(t=e.children)||void 0===t?void 0:t.map((function(e){return Object(V.jsx)(Ue,{node:e},e.name)}))]})});return f?x:w};function qe(e,t){for(var n=t.split("/"),a=e,r=function(e){var r=n[e],i=a.children.find((function(e){return e.name===r}));if(i)a=i;else{var c=e!==n.length-1,s={name:r,isDir:c,path:c?void 0:t,children:[]};a.children.push(s),a=s}},i=0;i<n.length;i++)r(i)}var ze=n(58),Je=n.n(ze),Ze=n(59),Qe=n.n(Ze),Xe=function(){var e=he(Re),t=de();return Object(V.jsx)("button",{className:Qe.a.sidePanelButton,onClick:function(){t($e(!e))},children:"\u2630"})},Ke=n(19),Ye=n.n(Ke),et=function(){var e=Object(F.c)(),t=Object(a.useRef)(null),n=Object(a.useState)(""),r=Object(p.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)("none"),o=Object(p.a)(s,2),u=o[0],l=o[1],d=Object(a.useState)([]),h=Object(p.a)(d,2),f=h[0],m=h[1],b=Object(a.useState)(-1),O=Object(p.a)(b,2),x=O[0],g=O[1];function y(e){if(!e)return e;var t=e.split(" ").filter((function(e){return e.length>0}));return t[t.length-1]}function w(e){l(e?"block":"none")}function _(){return(_=Object(v.a)(j.a.mark((function e(t){var n,a,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value||"",a=y(n),e.prev=2,e.next=5,B(a);case 5:r=e.sent,m(r.map((function(e){return{complete:a+e,suffix:e}}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),i="ERROR: ".concat(e.t0.message),m([{complete:i,suffix:i}]);case 13:w(!0),c(n);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function k(e){return C.apply(this,arguments)}function C(){return(C=Object(v.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(Le(n)),w(!1),e(be(n)),e($e(!0));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(e){var t=i.toLowerCase()+e.toLowerCase();return c(t),w(!1),t}function N(){return(N=Object(v.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Escape"!==t.key){e.next=5;break}return w(!1),e.abrupt("return");case 5:if("Enter"!==t.key){e.next=19;break}if(t.preventDefault(),"none"===u){e.next=15;break}return n=f[x],a=i,n&&(a=P(n.suffix)),e.next=13,k(a);case 13:e.next=17;break;case 15:return e.next=17,k(i);case 17:e.next=31;break;case 19:if("ArrowDown"!==t.key){e.next=26;break}return t.preventDefault(),w(!0),g(Math.min(x+1,f.length-1)),e.abrupt("return");case 26:if("ArrowUp"!==t.key){e.next=31;break}return t.preventDefault(),w(!0),g(Math.max(x-1,0)),e.abrupt("return");case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){document.addEventListener("click",(function(e){t.current&&!t.current.contains(e.target)&&w(!1)}))}),[]),Object(V.jsxs)("span",{className:Ye.a.searchArea,children:[Object(V.jsx)("input",{type:"text",id:"search-input",className:Ye.a.search,"aria-label":"search",value:i,onChange:function(e){return _.apply(this,arguments)},onKeyUp:function(e){return N.apply(this,arguments)}}),Object(V.jsx)("button",{type:"button",className:Ye.a.button,onClick:function(){return k(i)},children:"Search"}),Object(V.jsx)("button",{type:"button",className:Ye.a.button,onClick:function(){c(""),w(!1),e(Ie(void 0)),e(be("")),e($e(!0))},children:"Reset"}),Object(V.jsx)("div",{ref:t,className:Ye.a.searchDropdown,style:{display:u},children:f.map((function(e,t){return Object(V.jsx)("div",{onClick:function(){return P(e.suffix)},className:t===x?Ye.a.searchDropdownItemSelected:Ye.a.searchDropdownItem,children:Object(V.jsx)("div",{children:e.complete.toLowerCase()})},e.complete.toLowerCase())}))})]})},tt=n(60),nt=n.n(tt),at=function(){return Object(V.jsx)("button",{className:nt.a.githubIconContainer,children:Object(V.jsx)("a",{href:"https://github.com/DominicKramer/codex",children:Object(V.jsxs)("svg",{fill:"#cccccc",width:"1.2em",height:"1.2em",role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[Object(V.jsx)("title",{children:"GitHub"}),Object(V.jsx)("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})})})},rt=function(){return Object(V.jsxs)("div",{className:Je.a.topbar,children:[Object(V.jsx)(Xe,{}),Object(V.jsx)(et,{}),Object(V.jsx)(at,{})]})},it=n(6),ct=function(){return window.MATHLINGUA_DATA?Object(V.jsx)(it.c,{children:Object(V.jsxs)(st,{children:[Object(V.jsx)(rt,{}),Object(V.jsx)(Ge,{}),Object(V.jsx)("div",{className:h.a.contentPanel,children:Object(V.jsx)(it.d,{children:Object(V.jsx)(it.a,{path:"/*",children:Object(V.jsx)(Ce,{})})})})]})}):Object(V.jsx)(Fe.a,{children:Object(V.jsxs)(st,{children:[Object(V.jsx)(rt,{}),Object(V.jsx)(Ge,{}),Object(V.jsx)("div",{className:h.a.contentPanel,children:Object(V.jsx)(it.d,{children:Object(V.jsx)(it.a,{path:"/*",children:Object(V.jsx)(Ce,{})})})})]})})},st=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(o.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(V.jsxs)("p",{children:["An error occurred connecting to the MathLingua server. Are you running"," ",Object(V.jsx)("code",{children:"mlg serve"}),"?"]}):this.props.children}}]),n}(r.a.Component),ot=n(26),ut=Object(pe.a)({reducer:{sidePanelVisible:Me,paths:He,viewedPath:ye,query:je},middleware:[ot.a]});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(V.jsx)(r.a.StrictMode,{children:Object(V.jsx)(F.a,{store:ut,children:Object(V.jsx)(ct,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},15:function(e,t,n){e.exports={sidePanel:"SidePanel_sidePanel__2wshc",sidePanelContent:"SidePanel_sidePanelContent__1LQuN",sidePanelItem:"SidePanel_sidePanelItem__2Uvvj",selected:"SidePanel_selected__3iDL5",mathlinguaHomeItem:"SidePanel_mathlinguaHomeItem__2WfpH",mathlinguaListDirItem:"SidePanel_mathlinguaListDirItem__35D6Z",mathlinguaListFileItem:"SidePanel_mathlinguaListFileItem__fS2vD"}},17:function(e,t,n){e.exports={triangle:"PathTreeItem_triangle__1r7e7",link:"PathTreeItem_link__2zHfD",sidePanelItem:"PathTreeItem_sidePanelItem__1A12M",mathlinguaListDirItem:"PathTreeItem_mathlinguaListDirItem__3BEwG",mathlinguaListFileItem:"PathTreeItem_mathlinguaListFileItem__1JNHt",selected:"PathTreeItem_selected__r_5l2"}},19:function(e,t,n){e.exports={searchArea:"SearchPanel_searchArea__3eH01",search:"SearchPanel_search__2HQuA",searchDropdown:"SearchPanel_searchDropdown__24NWE",searchDropdownItem:"SearchPanel_searchDropdownItem__3wg4x",searchDropdownItemSelected:"SearchPanel_searchDropdownItemSelected__20Nxq",button:"SearchPanel_button__12eOc"}},32:function(e,t,n){e.exports={mathlinguaPage:"Page_mathlinguaPage__316SN"}},33:function(e,t,n){e.exports={mathlinguaTopLevel:"TopLevelEntry_mathlinguaTopLevel__tOe0D",mathlinguaFlipIcon:"TopLevelEntry_mathlinguaFlipIcon__-3nJ2",mathlinguaCloseButton:"TopLevelEntry_mathlinguaCloseButton__o8PUx"}},34:function(e,t,n){e.exports={entitiesPanel:"EntitiesPanel_entitiesPanel__1Sx74",entitiesPanelItem:"EntitiesPanel_entitiesPanelItem__1Xi0s",closeAllButton:"EntitiesPanel_closeAllButton__1uj94"}},35:function(e,t,n){e.exports={topLevelEntityGroup:"TopLevelEntityGroup_topLevelEntityGroup__MMFuW",triangle:"TopLevelEntityGroup_triangle__7AIJb",triangleBorder:"TopLevelEntityGroup_triangleBorder__2sXGm"}},39:function(e,t,n){e.exports={contentPanel:"App_contentPanel__1ZGS7"}},41:function(e,t,n){e.exports={errorLabel:"ErrorView_errorLabel__2AXEh",errorMessage:"ErrorView_errorMessage__2gtow"}},56:function(e,t,n){e.exports={mathlinguaBlockCommentTopLevel:"BlockComment_mathlinguaBlockCommentTopLevel__dhGBJ"}},57:function(e,t,n){e.exports={mathlinguaHome:"Home_mathlinguaHome__189Q7"}},58:function(e,t,n){e.exports={topbar:"TopBar_topbar__2sxmu"}},59:function(e,t,n){e.exports={sidePanelButton:"SidePanelButton_sidePanelButton__u4HAg"}},60:function(e,t,n){e.exports={githubIconContainer:"GitHubIcon_githubIconContainer__3BhmA"}},66:function(e,t,n){},81:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.58165edb.chunk.js.map